<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emotion Shopping Assistant</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ›ï¸ Smart Shopping Assistant</h1>
      <p class="tagline">AI-Powered Shopping with Emotion Detection</p>
    </header>

    <section class="emotion-section">
      <h2>ğŸ˜Š Emotion Detection</h2>
      <div class="toggle-group">
        <label class="switch">
          <input type="checkbox" id="emotionToggle">
          <span class="slider"></span>
        </label>
        <span id="emotionStatus">Disabled</span>
      </div>
      
      <div class="camera-permission-notice" style="background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; font-size: 12px; display: none;" id="cameraNotice">
        <strong>ğŸ“· Camera Access Required</strong>
        <p style="margin: 5px 0;">When you visit a shopping site, your browser will ask for camera permission. Click "Allow" to enable emotion detection.</p>
        <p style="margin: 5px 0; font-size: 11px; color: #666;">Or click below to grant permission now:</p>
        <button id="requestCameraBtn" style="background: #667eea; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; margin-top: 5px;">
          Enable Camera Now
        </button>
      </div>
      
      <div id="emotionDisplay" class="emotion-display hidden">
        <video id="webcam" autoplay playsinline></video>
        <canvas id="emotionCanvas" style="display:none;"></canvas>
        <div class="emotion-result">
          <span class="emotion-icon">ğŸ˜</span>
          <span class="emotion-text">Neutral</span>
          <div class="emotion-confidence">Confidence: 0%</div>
        </div>
      </div>
      <div class="keyboard-mode">
        <label>
          <input type="checkbox" id="keyboardMode">
          Use Keyboard/Cursor Mode (No Webcam)
        </label>
        <p style="font-size: 11px; color: #666; margin: 5px 0 0 20px;">Detects emotions from your browsing behavior without camera access</p>
        <div id="trainingStats" class="training-stats" style="display: none; margin: 10px 0 0 20px; font-size: 11px; color: #555;">
          <div>ğŸ“Š Training Samples: <span id="trainingSamples">0</span></div>
          <div>ğŸ¯ Model Accuracy: <span id="modelAccuracy">0</span>%</div>
          <div>ğŸ”„ Training Count: <span id="trainingCount">0</span></div>
        </div>
      </div>
    </section>

    <section class="features-section">
      <h2>âš™ï¸ Features</h2>
      
      <div class="feature-item">
        <label class="switch">
          <input type="checkbox" id="focusModeToggle" checked>
          <span class="slider"></span>
        </label>
        <div class="feature-info">
          <strong>Focus Mode</strong>
          <p>Blur sponsored items</p>
        </div>
      </div>

      <div class="feature-item">
        <label class="switch">
          <input type="checkbox" id="priceHistoryToggle" checked>
          <span class="slider"></span>
        </label>
        <div class="feature-info">
          <strong>Price History</strong>
          <p>Track price changes</p>
        </div>
      </div>

      <div class="feature-item">
        <label class="switch">
          <input type="checkbox" id="comparisonToggle" checked>
          <span class="slider"></span>
        </label>
        <div class="feature-info">
          <strong>Price Comparison</strong>
          <p>Compare across websites</p>
        </div>
      </div>

      <div class="feature-item">
        <label class="switch">
          <input type="checkbox" id="recommendationToggle" checked>
          <span class="slider"></span>
        </label>
        <div class="feature-info">
          <strong>AI Recommendations</strong>
          <p>Buy or not suggestions</p>
        </div>
      </div>

      <div class="feature-item">
        <label class="switch">
          <input type="checkbox" id="reviewCheckerToggle" checked>
          <span class="slider"></span>
        </label>
        <div class="feature-info">
          <strong>Review Checker</strong>
          <p>Detect fake reviews</p>
        </div>
      </div>
    </section>

    <section class="stats-section">
      <h2>ğŸ“Š Session Stats</h2>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value" id="moneySaved">$0</div>
          <div class="stat-label">Money Saved</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="productsAnalyzed">0</div>
          <div class="stat-label">Products Analyzed</div>
        </div>
      </div>
    </section>

    <footer>
      <button id="resetBtn" class="btn-secondary">Reset Settings</button>
    </footer>
  </div>
  <script src="popup.js"></script>
</body>
</html>
